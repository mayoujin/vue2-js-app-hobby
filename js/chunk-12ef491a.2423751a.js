(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-12ef491a"],{"0126":function(t,e,r){"use strict";r("a6915")},"052f":function(t,e,r){"use strict";var n=r("e101"),i=r.n(n);r.d(e,"default",(function(){return i.a}))},"13d5":function(t,e,r){"use strict";var n=r("23e7"),i=r("d58f").left,s=r("a640"),o=r("2d00"),a=r("605d"),u=s("reduce"),c=!a&&o>79&&o<83;n({target:"Array",proto:!0,forced:!u||c},{reduce:function(t){return i(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"228f":function(t,e,r){"use strict";var n=r("83e9"),i=r.n(n);r.d(e,"default",(function(){return i.a}))},"22c8":function(t,e,r){"use strict";var n=r("9951"),i=r.n(n);r.d(e,"default",(function(){return i.a}))},"498a":function(t,e,r){"use strict";var n=r("23e7"),i=r("58a8").trim,s=r("c8d2");n({target:"String",proto:!0,forced:s("trim")},{trim:function(){return i(this)}})},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,r){var n=r("1d80"),i=r("5899"),s="["+i+"]",o=RegExp("^"+s+s+"*"),a=RegExp(s+s+"*$"),u=function(t){return function(e){var r=String(n(e));return 1&t&&(r=r.replace(o,"")),2&t&&(r=r.replace(a,"")),r}};t.exports={start:u(1),end:u(2),trim:u(3)}},6340:function(t,e,r){t.exports={page:"_2uKggl8k",list:"_2HJyySTu"}},"83e9":function(t,e,r){t.exports={list:"IsdtjZc5",empty:"_2JOkUdz5",item:"_3r9y2E1H",actions:"_398MdPKx",button:"DtJTBxdG"}},9951:function(t,e,r){t.exports={status:"_1yn5OFEL",error:"_2MKLD9hQ","pick-button":"_2i_Hr2e8"}},a6915:function(t,e,r){},c8d2:function(t,e,r){var n=r("d039"),i=r("5899"),s="​᠎";t.exports=function(t){return n((function(){return!!i[t]()||s[t]()!=s||i[t].name!==t}))}},d58f:function(t,e,r){var n=r("1c0b"),i=r("7b0b"),s=r("44ad"),o=r("50c4"),a=function(t){return function(e,r,a,u){n(r);var c=i(e),d=s(c),b=o(c.length),f=t?b-1:0,l=t?-1:1;if(a<2)while(1){if(f in d){u=d[f],f+=l;break}if(f+=l,t?f<0:b<=f)throw TypeError("Reduce of empty array with no initial value")}for(;t?f>=0:b>f;f+=l)f in d&&(u=r(u,d[f],f,c));return u}};t.exports={left:a(!1),right:a(!0)}},db1a:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return z}));var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{class:t.$style.page},[r("h1",[t._v("Управление списками хобби")]),r("div",{class:t.$style.list},[r("h2",[t._v("Ваши хобби")]),r("Suspense",{scopedSlots:t._u([{key:"fallback",fn:function(){return[r("div",[t._v("Загрузка списка...")])]},proxy:!0}])},[r("PickedHobbyList")],1)],1),r("div",{class:t.$style.list},[r("h2",[t._v("Хобби друзей")]),r("Suspense",{scopedSlots:t._u([{key:"fallback",fn:function(){return[r("div",[t._v("Загрузка списка...")])]},proxy:!0}])},[r("OptionalHobbyList")],1)],1)])},i=[],s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ErrorBoundary",{attrs:{tag:"div","stop-propagation":""},scopedSlots:t._u([{key:"boundary",fn:function(e){var n=e.hasError;return[n?[r("div",[t._v("Не удалось загрузить список хобби друзей")])]:[r("HobbyList",{attrs:{hobbies:t.optionalHobbies},scopedSlots:t._u([{key:"actions",fn:function(e){var n=e.hobby;return[!1===t.isBusy&&!1===t.meta[n.uuid].isPicked?r("button",{class:t.$style["pick-button"],attrs:{title:"Добавить"},on:{click:function(e){return t.pickHobby(n)}}}):t._e()]}},{key:"status",fn:function(e){var n=e.hobby;return[t.meta[n.uuid].isPicked?r("div",{class:t.$style.status},[t._v(" Добавлено в ваши хобби ")]):t.itemErrors[n.hash]?r("div",{class:t.$style.error},[t._v(" Ошибка добвления ")]):t._e()]}},{key:"empty",fn:function(){return[r("div",{class:t.$style.empty},[t._v("В этом списке пока нет хобби")])]},proxy:!0}])})]]}}])})},o=[],a=r("1da1"),u=r("5530"),c=r("ade3"),d=(r("96cf"),r("13d5"),function(t,e){var r=e._c;return r("transition",{attrs:{name:"fade",mode:"out-in",tag:"div"}},[e.props.hobbies.length?[r("transition-group",{class:e.$style.list,attrs:{name:"fade",mode:"out-in",tag:"ul"}},[e._l(e.props.hobbies,(function(t){return[r("li",{key:t.hash,class:e.$style.item},[r("div",{class:e.$style.actions},[e._t("actions",null,{hobby:t})],2),e._t("hobby-name",[e._v(" "+e._s(t.hobby)+" ")],{hobby:t}),e._t("status",null,{hobby:t})],2)]}))],2)]:r("div",{class:e.$style.empty},[e._t("empty")],2)],2)}),b=[],f={name:"HobbyList",props:{hobbies:Array}},l=f,p=r("228f"),y=r("2877");function h(t){this["$style"]=p["default"].locals||p["default"]}var v=Object(y["a"])(l,d,b,!0,h,null,null),m=v.exports,_=r("c8d1"),k=r("14b6"),g=function(t,e){return Object(c["a"])({},t.uuid,{isPicked:Object(_["b"])(t,e)})},H={name:"OptionalHobbyList",data:function(){return{isBusy:!1,itemErrors:{}}},components:{HobbyList:m},computed:{optionalHobbies:function(){return this.$storage.getters.optionalHobbies},meta:function(){var t=this;return this.optionalHobbies.reduce((function(e,r){return Object(u["a"])(Object(u["a"])({},e),g(r,t.$storage.getters.pickedHobbies))}),{})}},created:function(){var t=this;Object(k["createResource"])(Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.$storage.actions.fetchOptionalHobbies());case 1:case"end":return e.stop()}}),e)})))).read()},methods:{pickHobby:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.isBusy=!0,delete e.itemErrors[t.hash],r.next=4,e.$storage.actions.pickHobby(t);case 4:n=r.sent,e.isBusy=!1,n.elseDo((function(r){e.itemErrors[t.hash]=r.message}));case 7:case"end":return r.stop()}}),r)})))()}}},$=H,w=r("22c8");function x(t){this["$style"]=w["default"].locals||w["default"]}var O=Object(y["a"])($,s,o,!1,x,null,null),E=O.exports,j=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ErrorBoundary",{attrs:{tag:"div","stop-propagation":""},scopedSlots:t._u([{key:"boundary",fn:function(e){var n,i=e.hasError;return[i?[r("div",[t._v("Не удалось загрузить список ваших хобби")])]:[r("div",{class:t.$style.adder},[r("input",{ref:"addNewInput",class:(n={},n[t.$style["adder__error"]]=t.isAddError,n[t.$style["adder__input"]]=!0,n),attrs:{placeholder:"Введите название",disabled:t.isBusy},on:{keypress:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addNewHobby(e)},t.resetAdderError]}}),r("button",{attrs:{disabled:t.isBusy},on:{click:t.addNewHobby}},[t._v("добавить")])]),r("HobbyList",{attrs:{hobbies:t.pickedHobbies},scopedSlots:t._u([{key:"actions",fn:function(e){var n=e.hobby;return[!1===t.isBusy&&!1===t.meta[n.uuid].isOptimistic?r("button",{class:t.$style["drop-button"],attrs:{title:"Убрать"},on:{click:function(e){return t.dropHobby(n)}}}):t._e()]}},{key:"hobby-name",fn:function(e){var n,i=e.hobby;return[r("div",{class:(n={},n[t.$style["optimistic"]]=t.meta[i.uuid].isOptimistic,n[t.$style["hobby-name"]]=!0,n)},[t._v(" "+t._s(i.hobby)+" ")])]}},{key:"status",fn:function(e){var n=e.hobby;return[t.meta[n.uuid].isOptimistic?r("div",{class:t.$style["optimistic"]},[t._v(" "+t._s(t.meta[n.uuid].status)+" ")]):t._e()]}},{key:"empty",fn:function(){return[r("div",[t._v("В Вашем списке пока нет хобби")])]},proxy:!0}])})]]}}])})},B=[],R=(r("498a"),r("d3db")),L=function(t){return t.trim()},S=function(t,e){return Object(c["a"])({},t.uuid,{isPicked:Object(_["b"])(t,e),status:t instanceof R["a"]?"(...обрабатывается)":"",isOptimistic:t instanceof R["a"]})},A=function(t){var e=L(t),r={hobby:e};return r},P={name:"PickedHobbyList",data:function(){return{isAddError:!1,isBusy:!1}},components:{HobbyList:m},computed:{pickedHobbies:function(){return this.$storage.getters.pickedHobbies},meta:function(){var t=this;return this.pickedHobbies.reduce((function(e,r){return Object(u["a"])(Object(u["a"])({},e),S(r,t.$storage.getters.optionalHobbies))}),{})}},created:function(){var t=this;Object(k["createResource"])((function(){return t.fetchHobbies()})).read()},methods:{fetchHobbies:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$storage.actions.fetchPickedHobbies();case 2:case"end":return e.stop()}}),e)})))()},addNewHobby:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.isAddError=!1,t.isBusy=!0,r=A(t.$refs.addNewInput.value),!1!==Object(_["c"])(r)){e.next=8;break}return t.$refs.addNewInput.value=r.hobby,t.isAddError=!0,t.isBusy=!1,e.abrupt("return");case 8:return e.next=10,t.$storage.actions.addNewHobby(r);case 10:n=e.sent,n.do((function(){t.$refs.addNewInput.value=""})),t.isBusy=!1;case 13:case"end":return e.stop()}}),e)})))()},dropHobby:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=confirm("Удалить хобби их списка?"),!1!==n){r.next=3;break}return r.abrupt("return");case 3:return e.isBusy=!0,r.next=6,e.$storage.actions.dropHobby(t);case 6:e.isBusy=!1;case 7:case"end":return r.stop()}}),r)})))()},resetAdderError:function(){this.isAddError=!1}}},N=P,I=r("052f");function J(t){this["$style"]=I["default"].locals||I["default"]}var K=Object(y["a"])(N,j,B,!1,J,null,null),Q=K.exports,T={name:"Main",components:{PickedHobbyList:Q,OptionalHobbyList:E}},D=T,M=(r("0126"),r("e895"));function C(t){this["$style"]=M["default"].locals||M["default"]}var U=Object(y["a"])(D,n,i,!1,C,null,null),z=U.exports},e101:function(t,e,r){t.exports={adder:"_3s7hfR-Q",adder__error:"_1mYQ87Wb",adder__input:"_2s71Sj5U",optimistic:"_36Ta4Hrw","hobby-name":"_3as60iCI","drop-button":"_2687m5QK"}},e895:function(t,e,r){"use strict";var n=r("6340"),i=r.n(n);r.d(e,"default",(function(){return i.a}))}}]);